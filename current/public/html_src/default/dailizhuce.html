<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
	<title>代理商注册_{fzw:key:sitename/}</title>	
<link rel="stylesheet" type="text/css" href="css/jquery-ui.min.css">
<link rel="stylesheet" type="text/css" href="css/class.css">
<link rel="stylesheet" href="css/bootstrap.min.css">
<link rel="stylesheet" href="css/font-awesome.min.css">
<script type="text/javascript" src="js/jquery-3.0.0.min.js"></script>
<script type="text/javascript" src="js/jquery-ui.min.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/class.js"></script>
<script src="/inc/layer/layer.js" type="text/javascript" charset="utf-8"></script>
</head>
<body style="background:url(./img/login-bg.png) no-repeat;background-size:cover;background-position:center">
<!-- login -->
<div class="login-head">
	<div class="login-max">
		<div class="login-head-left">
			<a href="/"><img src="img/login-logo.png"></a>
			<img src="img/logo-word.png">
		</div>
		<div class="login-head-right">
			<img src="img/login-icon1.png">
			10年品牌 真实口碑
			<img src="img/login-icon2.png">
			精品课程 免费学习
			<img src="img/login-icon3.png">
			实战练习 名师指导
		</div>
		<div class="clear"></div>
	</div>
</div>
<div class="register">
	<div class="login-max">
		<div class="register-left">
			<p>代理商注册<a href="/single.aspx?m=laoshizhuce">老师注册</a><a href="/single.aspx?m=xueshengzhuce">学生注册</a></p>
			<form id="reg-form" method="post" action="/Execution.aspx?type=useradd&t=user&tipurl={fzw:url:tipurl /}&tip_string=代理注册成功！">
				<input type="text" name="yonghuming" style="display: none">
				<input type="text" name="shouji" placeholder="请输入手机号" id="shouji">
				<input type="text" name="shoujiyzm" placeholder="动态码" id="shoujiyzm">
				<button class="get-code" id="lqyzm" type="button" onclick="send_jiaoyanma(this)" class="btn-success">获取动态码</button>
				<div class="register-password"><input type="password" name="mima" placeholder="输入8~16位密码" onblur="nopassword(this)" onfocus="inputpassword(this)" id="mima">
				<span>请输入密码</span></div>
				密码长度8~16位，数字、字母、字符至少包含两种
				<input type="password" name="mima_" placeholder="再次输入密码" class="querengmima">
				<label style="margin-top:10px;color:#6f6f6f;" class="invite-code">
					<input type="checkbox" name="">
					<span></span>
					邀请码（选填）
				</label><br>
				<input type="text" id="yqm" onchange="yqm1()" placeholder="输入邀请码" class="input-invite-code" style="margin:0;width: 100%;">
				<label style="margin:10px 10px 10px 0;">
					<input type="checkbox" name="" class="tongyi">
					<span></span>
					同意遵守华予教育学院
				</label><a href="/page.aspx?id=11&classid=52" target="_blank">网站条款</a>
				<input type="hidden" name="yaoqingma" id="yaoqingma" />
                <input type="hidden" name="jieshaoren" id="jieshaoren" />
                <input type="hidden" name="shenhe" value="待审核">
                <input type="hidden" name="touxiang" value="{fzw:cookie:name=" touxiang"}">
                <input type="hidden" name="xingbie" value="{fzw:cookie:name=" xingbie"}">
                <input type="hidden" name="weiboid" value="{fzw:cookie:name=" weiboid"}">
                <input type="hidden" name="qqid" value="{fzw:cookie:name=" qqid"}">
                <input type="hidden" name="leixing" id="leixing" value="代理" />
			</form>	
			<button id="regist">注册</button>
		</div>
		<div class="register-right">
			<p>已有账号&nbsp;<a href="/single.aspx?m=login">直接登录</a></p>
			<p>微信扫描二维码快速注册：</p>
			<p>扫描 》关注 》确认安全 》注册成功</p>
			<img src="img/2d.png"><br>
			其他合作网站账户注册<br>
			<a href=""><i class="fa fa-qq" aria-hidden="true"></i></a>
			<a href=""><i class="fa fa-weixin" aria-hidden="true"></i></a>
			<a href=""><i class="fa fa-weibo" aria-hidden="true"></i></a>
		</div>
		<div class="clear"></div>
	</div>
</div>
<div class="login-bottom">
{fzw:sql="select top 1 * from sl_banner where classid=42 order by id desc" id="p1"}
	{fzw:p1:u4/}
{/fzw:sql}	
</div>
<script type="text/javascript">
function yqm1()
    {
        $.ajax({
            type: "get",
            url: "/single.aspx?m=yqm&yqm=" + document.getElementById('yqm').value + "",
            success: function (data) {
              
                if (data == "") {
                    layer.msg("此邀请码不存在");
                    document.getElementById('yqm').value = "";
                    document.getElementById('jieshaoren').value = "";
                } else {
                    document.getElementById('jieshaoren').value = data;
                }
            }
        })
    }
    //生成随机数
    var chars = ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z'];

    function generateMixed(n) {
        var res = "";
        for (var i = 0; i < n ; i++) {
            var id = Math.ceil(Math.random() * 35);
            res += chars[id];
        }
        return res;
    }
    $("#yaoqingma").val(generateMixed(6));
	function nopassword(e){
		var x = $(e).val();
		if (x=='') {
			$(e).parent("div").attr("id","no-password");
		}else{
			$(e).parent("div").removeAttr("id","no-password");
		}
	}
	function inputpassword(e){
		$(e).parent("div").removeAttr("id","no-password");
	}
</script>
<script type="text/javascript">
	var count = 120;
	var countdown;
    function countDown() {
        $("#lqyzm").html(count + "秒后可重试");
	    if (count == 0) {
		    $("#lqyzm").removeAttr("disabled").html("获取动态码");
		    clearInterval(countdown);
		}
        count--;
    }
	function send_jiaoyanma(btn) {     
		//手机验证
		var myreg = /^1+\d{10}$/;
		if (!myreg.test(document.getElementById('shouji').value)) {
			layer.alert("手机号不正确");
		}else {
			$(btn).attr("disabled", true);
			count = 120;			                   			                                   
			countdown = setInterval("countDown()", 1000); 
			//获取手机验证码
			$.ajax({
			    type: "POST",
			    url: "/Execution.aspx?t=fasong&leixingbiaoti=会员注册&type=shouji_yzm&shouji=" + document.getElementById('shouji').value + "",
			    processData: true,
			    success: function (data) {
			        //  alert(data);
			        if (data == "ok") {
			            layer.msg("验证码发送成功");
			        }else {
			            layer.msg("验证码发送成功");
			        }
			    }
			})
		}
	}
	$("#regist").click(function() {
		var x = $('#reg-form input[name="shouji"]').val();
		$('#reg-form input[name="yonghuming"]').val(x);
		var count = 0;
		$('#reg-form input').each(function() {
			if ($(this).val() == "") {
				count++;
			}else if ($(".invite-code").children("input").prop("checked")==false) {
				count--;
			}
		});
		var mima = /((?=.*\d)(?=.*\D)|(?=.*[a-zA-Z])(?=.*[^a-zA-Z]))^.{8,16}$/;
		if (!mima.test(document.getElementById('mima').value)) {
			layer.alert("密码太简单了！请输入密码长度8~16位，数字、字母、字符至少包含两种");
			return false;
		}
		if (count > 0) {
			layer.msg('请完整填写信息');
			return false;
		}
		if ($(".tongyi").prop("checked")==false) {
			layer.msg('请同意注册条款!');
			return false;
		}
		var a = $("#mima").val();
		var b = $(".querengmima").val();
		if (a!=b) {
			layer.msg('两次密码不一样，请重新确认！');
			return false;
		}
		document.getElementById("reg-form").submit();
		return false;
	});
</script>
</body>
</html>